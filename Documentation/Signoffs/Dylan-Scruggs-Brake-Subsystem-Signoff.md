# Brake Control System

## Functionality
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The Brake Control System is being implemented to allow for the ability to apply user-controlled resistance to the roller. This system will be the driving factor behind ensuring the customer’s desires are satisfied. With this system the user shall be able to apply a desired load to observe how the bike reacts to different braking and road grade loads. This will be made possible with the implementation of 2 3-phase AC electric motors, connected to the drum mechanically, to apply resistance to the mechanical load applied. In addition, a dc power supply will be used to input direct current values to the stator of the motors and cause a braking affect. Through the coaction of these components, this subsystem will be able to deliver desired metrics over various simulated conditions.

## Constraints
|No.        |Constraints   |Origin   |
|---|---------------------|--------|
|3|The system shall be able to handle a roller induced torque of up to 25.94 lb-ft.         |Design Constraint |
|5|Comply with all relevant codes and standards listed in II. Ethical, Professional, and Standard Considerations focusing on NFPA 79 – 10.7.1. (emergency stops)       |Safety Constraint|
|20|The motor shall have a maximum torque rating of, at minimum, +20% of maximum expected torque reading.         |Derived from further considerations |
|21|The motor shall be able to handle a maximum expected roller rotational speed of 1288 rpm.       |Derived from further considerations|
|22|The motor shall never reach synchronous speed (1710rpm).       |Derived from further considerations|

3.) The maximum calculated torque value that the applied motor shall receive from the roller is 25.94 lb-ft. The selected motor must be able to safely and effectively handle all events in which values up to this maximum are present. Therefore, the process of motor selection will include major attention to the full load and breakdown torque capacities.<br><br>
5.) This system will follow all relevant codes and standards listed in the conceptual design and proposal. One standard with a high magnitude of importance that will be met throughout this design is NFPA 79 – 10.7.1. This standard encompasses that any electrically operated industrial device must possess an emergency stop. This will be implemented through the collaboration of both this system as well as mechanical design.<br><br>
20.) To ensure safety and the selected motor’s ability to handle to maximum expected torque value, the maximum applied torque with an extra 20% must be within the component’s torque range. This comes out to a maximum torque of 31.13 lb-ft. This value will be used within the torque evaluation to determine the most suitable motor.<br><br>
21.) To correctly operate and ensure component safety, the selected motor must be able to handle rotational speeds up to 1288 rpm. This rating will be a driving factor in the selection of the implemented motor. If the motor selected can’t handle a 1288 rpm rotational speed, stator damage may occur.<br><br>
22.) In order to ensure component safety and stable braking affects, the motor must never reach synchronous speed. At this speed, the motor will begin to act as a generator and produce power. This will affect the strength of the magnetic field and reduce the accuracy of the load applied. Therefore, operations will be put into place to ensure this mode is never activated.<br><br>

## Schematics
### Wiring Diagram of Dayton 3-Phase Induction Motor(9 Lead – WYE Connection)
![image](https://github.com/Dylan2432/Capstone1_Team3_EV-Motorcycle-Chassis-Dynamometer/assets/100161668/14aae5f5-5ab6-4257-980b-bdfe53a88299)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The wiring diagram above shows the different ways in which the input power can be supplied. The “LO VOLTS” side indicates how to connect the terminals to have the motor operate in the 208-230 V mode. The “HI VOLTS” side similarly depicts how to connect each terminal to have the motor operate in the 460 V mode. For this implementation, the LO VOLTS connection will be used. The reasoning and process of using this connection will be further explained in the analysis.

### Full Brake Control System Wire Diagram
![image](https://github.com/Dylan2432/Capstone1_Team3_EV-Motorcycle-Chassis-Dynamometer/assets/100161668/192ac6ab-983d-44ca-baf5-952b97ca9dbe)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The wire diagram above lays out the connections made between the DC power supply and the terminal box of the DAYTON 3-Phase motor. Two 1 to 2 DC wire leads are used to allow the 2 phases receiving input to get required positive and negative output connections. In addition to the power supply to motor connection, the diagram also shows how a load cell will be implemented to take the force applied from the torque arm and generate an output that can be identified as a readable torque value. Furthermore, a temperature sensor is also attached to the motor body to monitor component temperature and allow the system to respond to unexpected high readings. This setup will be applied to both motors used. The process this undergoes will be further explained in the analysis section as well as the sensor integration subsystem.

## Analysis
### Motor Analysis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The Dayton 3-Phase motor was the decided upon motor to be used in order to drive the ability to create a controlled braking system. This component was selected through a series of well thought out steps and calculations.<br><br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The first characteristic of the motor that required a decision was whether to use a synchronous or induction motor. In this case, an induction motor proved to be the best option for the design. This is due to its simpler design and ability to operate more efficiently and effectively with dc injection braking. Once injecting direct current, synchronous motors are more susceptible to damage or fluctuations in braking. This stems from synchronous motors being designed to operate in perfect synchronization with the frequency of the power supplied. This characteristic presents the driving factor in choosing an induction motor over a synchronous motor. For, induction motors do not have permanent magnets or rotor windings to perfectly match the rotation of the stator’s rotating magnetic field. Instead, a squirrel-cage rotor’s (consisting of bars arranged in a cylindrical core) current is induced through electromagnetic induction from the stator windings. This causes them to operate with slip (difference in speed between magnetic field and rotor). Slip is a key factor in providing a smooth braking affect as once the stator windings receive dc current the magnetic field becomes stationary. Slip is a requirement with dc injection to rid of sudden changes and possible damage as the rotor simply acts upon the magnetic field produced from the stator. In synchronous motors, since the rotor is designed to operate at the same frequency as the stator’s magnetic field, slip is not present. With this, sudden stops and changes in braking torque can occur rather than providing a smooth, better controlled braking affect. From this research, the decision to use an induction motor proved indisputable.<br><br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After selecting the type of motor, the next characteristics that were looked at were the torque and rpm ratings needed to provide correct operation. Before these metrics can be calculated, a decision must be made on the roller size. This metric was decided to be 12 inches in diameter based on safety calculations and considerations made by the mechanical team. With this parameter, the maximum rpm that the motor must be able to test can be found. This is derived using the equation RPM = ((Speedmax)*(60))/((π)*(Diameter)).  The maximum speed of the bike (74 km/h or 20.56 m/s) and the 12-inch diameter of the roller are used to compute this value. After plugging these values in, the maximum rotational speed of the roller comes out to 1288 rpm. This value sets a maximum rotational speed that the motor selected most be able to read. Moreover, the maximum torque of the roller is derived using the equation Torque(RollerMax)=  (PowerMax*(60))/(2*π*RPM(RollerMax)). The power used in this equation is the max output rating of the bike (3500 W). The then computed 1288 rpm metric is plugged in to find that the max torque of the roller is 25.94 lb-ft. However, for safety and operation assurance, 20% is added to this value. This brings the max torque that the motor must handle up to 31.13 lb-ft. With these two values, the parameters at which the motor must operate were set.<br><br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Through these thoroughly calculated steps, the selection to pick the DAYTON 3-Phase induction motor made the most sense. For, the max breakdown torque rating is 28.68 lb-ft and the rpm rating is 1750. Due to the rotational speed rating being well above 1288rpm, constraint 21 is resolved. Moreover, the listed torque rating shows the motor can handle the expected max value of 25.94 lb-ft; however,  it does not fall within the further considered 31.13 lb-ft torque rating. Additionally, when using dc injection braking torque is limited to 66% of max motor torque. Unfortunately, this shows that only 18.93 lb-ft can be tested with this design. Therefore, the decision to use a second Dayton 3-Phase induction motor was made. This was based on calculations deriving what max torque would be needed by a motor to allow functionality without component or safety risk. These computations began with dividing the maximum expected torque of the roller by 2. This is a result of the load being evenly divided amongst the now 2 present motors. With this design, the maximum roller torque reduces to 12.97 lb-ft, and with the extra 20% 15.56 lb-ft. Through this implementation, the rating 20% over the maximum expected torque is still 3.37 lb-ft less than the maximum testable torque numeric. Furthermore, this value is 13.12 lb-ft less than the breakdown torque rating of the motor. This calculation proves that constraint 20 is met. Through these derivations, the Dayton 3-Phase induction motor proves to exhibit all required numerical parameters. This process proves that a maximum expected torque rating of 25.94 lb-ft from the roller is safely and effectively handled and proves constraint 3 is met.<br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;With a maximum rotational speed of 1288 rpm found, the next step involves ensuring the motor never reaches synchronous speed. The synchronous speed rating of an AC motor describes the rotation speed at which, if mechanically driven, the motor will operate as a generator. With this design, the motor reaching this speed could lead to unwanted complications. For, if the motor were to reach this speed, it would begin to generate electrical energy. This could create issues with the magnetic field’s strength varying and possibly induce damage to the motor. Therefore, the rotor speed of this motor was solved in order to give the mechanical team a rpm value that the motor must never come close to. The rotor speed was calculated through the equation N_rotor= -(slip)(N_sync )+N_sync. In order to compute this value, the slip and synchronous speed must be solved for. To find N_sync, the equation〖 N〗_(sync=)  120*frequency/(number Poles)  was used. The frequency and number of poles of this motor are, respectively, 60hz and 4 poles. This gives a synchronous speed of 1800rpm. For the slip value, the max slip in induction motor designs are 5%. Therefore, the minimum possible rotor speed that would cause power generation is 1710 rpm. Although this value is well above the expected maximum rotational speed (from the roller size selected), the mechanical team will still implement a Lovejoy coupling to ensure prevention of generator operation ever occuring. Through this process, it can be seen that constraint 22 is effectively met.<br><br>

### Dc Injection Braking Analysis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;With the listed components, the application of DC injection becomes possible and suitable for all testing parameters desired. This process is done by applying direct current to the stator windings of an AC 3-Phase squirrel cage Induction motor. Further expanding on this, the direct current applied is only fed to 2 of the 3 phases of the stator. This is due to the magnetic field’s magnitude, when applying to 3 phases, equaling 0, and 2 phases being stronger than 1. This is portrayed in the following figure.<br>

![image](https://github.com/Dylan2432/Capstone1_Team3_EV-Motorcycle-Chassis-Dynamometer/assets/100161668/c73e4e61-14cb-405c-b316-ca02d67d1947)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From this figure, it can be gathered that the strongest, most resistive magnetic field will be constructed through applying DC to 2 of the stator winding’s phases. Once direct current as been applied to the stator, the previously rotating magnetic field is held stationary. This creates a braking affect on the motor’s shaft and applies resistance to the active mechanical load. This stationary magnetic field creates a braking torque of maximum 66% of the motor’s rated torque capacity. As previously proven, this comes out to a possible maximum 18.93 lb-ft braking torque being produced with only a 12.97 lb-ft maximum torque being present from the mechanical load. This proves that the application of DC injection is fully capable of delivering any braking torque necessary for the current test. This braking torque magnitude will correlate directly with the amount of direct current applied to the stator. This is due to, once supplying direct current and creating the stationary magnetic field, the more current applied results in an increase of strength. Through this process, the current creates a short circuit across the windings resulting in heat being generated. Therefore, safety precautions and prohibitors will be set in place to counteract heating issues. Firstly, a temperature sensor, further discussed in the sensor integration subsystem, will be attached to the body of each motor to relay real time temperature. Although the stator temperature is the needed metric, a direct correlation between the 2 exists as induction motor housings are 30 degrees Celsius cooler than the stator. Additionally, the chosen motor’s insulation rating is class F which correlates to a maximum stator temperature of 155 degrees Celsius. Therefore, the implemented temperature sensors will support ensuring the motor body never exceeds the rated degree. To further aid in the heat monitoring / cooling process, the mechanical team is implementing fans to directly blow on the motor body as well as vents to allow all excess heat to depart. Even if through these measures the motor were to momentarily exceed the max rated temperature, it won’t instantly fail in operation. Instead, the insulation life of the component will begin to decrease. This linear correlation between temperature and insulation life is depicted in the following diagram provided by Motion Control tips in an article describing NEMA insulation classes.<br>

![image](https://github.com/Dylan2432/Capstone1_Team3_EV-Motorcycle-Chassis-Dynamometer/assets/100161668/9951dafc-a427-4557-9397-e7bb53f4874f)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In addition to monitoring the real time temperature of the motors, the torque and rpm of the motor will also be measured. Measurements of the rotational speed will be further discussed in the sensor subsystem. Torque data gathering will also be further discussed in sensors but will use this system in order to retrieve this data. The stationary magnetic field causes the motor to rotate against the mechanical force and induce torque. This value will be retrieved through the coaction of a load cell and torque arm. The torque arm will be attached to the motor at its center of rotation point and extrude 12 inches out, to ease calculations, and attach to a load cell. This load cell will measure the force applied by the arm and in turn output the related torque value. All in all, this design will allow the user to run all load tests and retrieve all metrics associated.<br><br>

### Power Supply Analysis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A DC power supply is vital to the operation of this design. Furthermore, a main customer requirement of the entire system is that components be remotely controllable. Therefore, a DC power supply will be designed in another subsystem. However, to decide the current parameters needed in this design, the full load amperage of the motor was taken into factor. This value is a maximum of 5.9 amps. Additionally, the motor, with a rated service factor of 1.25 can handle 7.2 amps. When doing dc injection, experts suggest using 150% of the max amperage the motor can handle. This gives 18A with the service factor rating and 14.75A with the full load rating. Therefore, a power supply with, at minimum, the ability to supply 18 amps is needed. This design will be further expanded on in the power supply subsystem.<br><br>

### Stator Wiring Analysis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As previously described, the direct current will be injected into 2 of the stator phases. Before making this connection, the terminal box must first be set up to the desired voltage operation mode. For this application, it will be set up in the “LO VOLT” mode. This is due to the current ratings being larger in this application. For, with the ability to apply more current stems the ability to induce a larger load and test larger braking affects. This difference in current ratings can be seen in the data sheet of the Dayton 3-Phase motor attached in references. The outputs of the DC power supply will then be connected to 2 of the 3 phases listed in the previously attached diagram of the terminal box. The 3rd phase will be left unsupplied. This connection will allow correct operation of the implemented DC injection braking.<br><br>

### E-Stop Analysis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Customer request and standard NFPA 79 – 10.7.1. require that an emergency stop be present to stop in the event of dangerous situations. This requirement will be met through the coaction of this system applying the maximum, safe amperage to the stator windings in order to quickly stop the roller. As specified early, temperature can reach values above the rated 155 degrees Celsius with the drawback of insulation damage. Therefore, this process may avoid the temperature constraint, and apply the maximum tested amperage the motor can handle to achieve the fastest stop time possible. Based on the designed power supply’s maximum current rating and testing, this amperage value will be determined. In addition to this implementation, the mechanical team will also design and integrate a mechanical brake on the rotor in order to aid in the stop time of this event. This application allows constraint 5 to be met.<br><br>

### Incline Testing Analysis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;With the implementation of this design, the ability to apply constant loads to simulate road inclines is acquired. This will require finding a correlation between current applied and load generated. Upon receiving components and setting up the system, a numerical correlation between the two will be generated through testing. Once completing testing and observing and confirming a correlation, various incline grades will be able to be tested at the user’s discretion.<br><br>

## BOM
|Item        |Quantity   |Price   |Total   |
|------------|-----------|--------|--------|
|Dayton 3-Phase Motor|2          |$717.24 |$717.24|
|Subsystem Total |||$717.24|

## References
Dayton 3-Phase Motor: https://www.grainger.com/product/48ZJ90?gucid=N:N:FPL:Free:GGL:CSM-1946:tew63h3:20501231<br>
Dayton 3-Phase Motor Datasheet: https://www.grainger.com/ec/pdf/48ZJ90_3.pdf<br>
Thermal Graph: https://www.motioncontroltips.com/what-does-motor-insulation-class-specify-and-why-is-it-important/<br>
DC Injection Explanation: https://www.kebamerica.com/blog/dc-injection-braking/<br>


